{"version":3,"sources":["src/util/index.ts","src/util/color.ts","src/model/shape.ts","src/model/piece.ts","src/util/keys.ts","src/model/board.ts","src/index.ts"],"names":[],"mappings":"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","file":"cd8a7dbfe00fa1bc3956ae5c9aabab45.map","sourcesContent":["export function addClass(node: HTMLElement, classes: string) {\n  if (node.className) {\n    node.className += \" \" + classes\n  } else {\n    node.className = classes\n  }\n}\n\nexport function drawSquare(x: number, y: number, ctx: CanvasRenderingContext2D, size: number) {\n  ctx.fillRect(x * size, y * size, size, size)\n  const ss = ctx.strokeStyle\n  ctx.strokeStyle = \"#222222\"\n  ctx.strokeRect(x * size, y * size, size, size)\n  ctx.strokeStyle = ss\n}","export enum Colors {\n  red = 1, blue, green, brown, purple, aqua, orange\n}","// min of 3x3, can be larger\nexport interface Shape extends Array<number[]> {\n  0: [number, number, number]\n  1: [number, number, number]\n  2: [number, number, number]\n}\n\nexport enum TetrominoType {\n  SQUARE = 1,\n  LINE,\n  L,\n  J,\n  T,\n  S,\n  Z\n}\n\n/**\n * Each shape is stored in a 5x5 array because the 4x4 piece moves when rotated.\n * Each rotation of the shape is stored in each object.\n */\nexport const Shapes = {\n  [TetrominoType.SQUARE]: [\n    [\n      [0, 1, 1],\n      [0, 1, 1],\n      [0, 0, 0],\n    ] as Shape,\n    [\n      [0, 1, 1],\n      [0, 1, 1],\n      [0, 0, 0],\n    ] as Shape,\n    [\n      [0, 1, 1],\n      [0, 1, 1],\n      [0, 0, 0],\n    ] as Shape,\n    [\n      [0, 1, 1],\n      [0, 1, 1],\n      [0, 0, 0],\n    ] as Shape\n  ],\n  [TetrominoType.LINE]: [\n    [\n      [0, 0, 0, 0],\n      [2, 2, 2, 2],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n    ] as Shape,\n    [\n      [0, 0, 2, 0],\n      [0, 0, 2, 0],\n      [0, 0, 2, 0],\n      [0, 0, 2, 0],\n    ] as Shape,\n    [\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [2, 2, 2, 2],\n      [0, 0, 0, 0],\n    ] as Shape,\n    [\n      [0, 2, 0, 0],\n      [0, 2, 0, 0],\n      [0, 2, 0, 0],\n      [0, 2, 0, 0],\n    ] as Shape\n  ],\n  [TetrominoType.L]: [\n    [\n      [0, 0, 3],\n      [3, 3, 3],\n      [0, 0, 0]\n    ] as Shape,\n    [\n      [0, 3, 0],\n      [0, 3, 0],\n      [0, 3, 3]\n    ] as Shape,\n    [\n      [0, 0, 0],\n      [3, 3, 3],\n      [3, 0, 0]\n    ] as Shape,\n    [\n      [3, 3, 0],\n      [0, 3, 0],\n      [0, 3, 0]\n    ] as Shape\n  ],\n  [TetrominoType.J]: [\n    [\n      [4, 0, 0],\n      [4, 4, 4],\n      [0, 0, 0]\n    ] as Shape,\n    [\n      [0, 4, 4],\n      [0, 4, 0],\n      [0, 4, 0]\n    ] as Shape,\n    [\n      [0, 0, 0],\n      [4, 4, 4],\n      [0, 0, 4]\n    ] as Shape,\n    [\n      [0, 4, 0],\n      [0, 4, 0],\n      [4, 4, 0]\n    ] as Shape\n  ],\n  [TetrominoType.S]: [\n    [\n      [0, 5, 5],\n      [5, 5, 0],\n      [0, 0, 0]\n    ] as Shape,\n    [\n      [0, 5, 0],\n      [0, 5, 5],\n      [0, 0, 5]\n    ] as Shape,\n    [\n      [0, 0, 0],\n      [0, 5, 5],\n      [5, 5, 0]\n    ] as Shape,\n    [\n      [5, 0, 0],\n      [5, 5, 0],\n      [0, 5, 0]\n    ] as Shape\n  ],\n  [TetrominoType.Z]: [\n    [\n      [6, 6, 0],\n      [0, 6, 6],\n      [0, 0, 0]\n    ] as Shape,\n    [\n      [0, 0, 6],\n      [0, 6, 6],\n      [0, 6, 0]\n    ] as Shape,\n    [\n      [0, 0, 0],\n      [6, 6, 0],\n      [0, 6, 6]\n    ] as Shape,\n    [\n      [0, 6, 0],\n      [6, 6, 0],\n      [6, 0, 0]\n    ] as Shape\n  ],\n  [TetrominoType.T]: [\n    [\n      [0, 7, 0],\n      [7, 7, 7],\n      [0, 0, 0]\n    ] as Shape,\n    [\n      [0, 7, 0],\n      [0, 7, 7],\n      [0, 7, 0]\n    ] as Shape,\n    [\n      [0, 0, 0],\n      [7, 7, 7],\n      [0, 7, 0]\n    ] as Shape,\n    [\n      [0, 7, 0],\n      [7, 7, 0],\n      [0, 7, 0]\n    ] as Shape\n  ]\n}\n","import { TetrominoType, Shape, Shapes } from './shape'\nimport { Colors } from '../util/color'\nimport { drawSquare } from '../util'\n\nexport class Piece {\n  type: TetrominoType\n  boardWidth: number\n  size: number\n  \n  rotation: number\n  shape: Shape\n  row: number\n  col: number\n  color: string\n\n  constructor(type: TetrominoType,\n              boardWidth: number,\n              size: number) {\n\n    this.type = type\n    this.boardWidth = boardWidth\n    this.size = size\n\n    this.rotation = 0\n    this.color = Colors[this.type]\n    this.shape = Shapes[this.type][this.rotation]\n    this.row = -2 // y\n    this.col = (this.boardWidth / 2) - Math.ceil(this.shape.length / 2); // x\n  }\n\n  public draw(ctx: CanvasRenderingContext2D) {\n    this.fill(ctx, Colors[this.type])\n  }\n\n  public clear(ctx: CanvasRenderingContext2D) {\n    this.fill(ctx, \"white\")\n  }\n\n  public left(ctx: CanvasRenderingContext2D, collides: Function) {\n    if (collides(this, -1, 0, this.shape)) {\n      return\n    }\n\n    this.clear(ctx)\n    this.col--\n    this.draw(ctx)\n  }\n\n  public right(ctx: CanvasRenderingContext2D, collides: Function) {\n    if (collides(this, 1, 0, this.shape)) {\n      return\n    }\n\n    this.clear(ctx)\n    this.col++\n    this.draw(ctx)\n  }\n\n  public down(\n    ctx: CanvasRenderingContext2D,\n    collides: Function,\n    setOnBoard: Function\n  ): Piece | boolean {\n    if (collides(this, 0, 1, this.shape)) {\n      if (this.set(setOnBoard)) return true\n      return Piece.randomPiece(this.boardWidth, this.size)\n    }\n\n    this.clear(ctx)\n    this.row++\n    this.draw(ctx)\n    return false\n  }\n\n  public hardDown(ctx: CanvasRenderingContext2D, collides: Function) {\n    let dy = 1\n    while (!collides(this, 0, dy, this.shape)) {\n      dy++\n    }\n\n    this.clear(ctx)\n    this.row += dy - 1\n    this.draw(ctx)\n  }\n\n  public rotate(ctx: CanvasRenderingContext2D, collides: Function) {\n    const nextRotation = Shapes[this.type][(this.rotation + 1) % 4]\n    let nudge = 0\n\n    if (collides(this, 0, 0, nextRotation)) {\n      nudge = this.col > this.boardWidth / 2 ? -1 : 1\n    }\n\n\n    if (collides(this, nudge, 0, nextRotation)) {\n      return\n    }\n\n    this.clear(ctx)\n    this.col += nudge\n    this.rotation = (this.rotation + 1) % 4\n    this.shape = Shapes[this.type][this.rotation]\n    this.draw(ctx)\n  }\n  \n  public set(setOnBoard: Function): boolean {\n    for (let r = 0; r < this.shape.length; r++) {\n      for (let c = 0; c < this.shape.length; c++) {\n        if (!this.shape[r][c]) continue\n\n        if (this.row + r < 0) {\n          return true\n        }\n\n        setOnBoard(this.row + r, this.col + c, this.type)\n      }\n    }\n    return false\n  }\n\n  public static getRandomType(): number {\n    return Math.floor(Math.random() * 7) + 1\n  }\n\n  public static randomPiece(boardWidth: number, size: number): Piece {\n    const newType = Piece.getRandomType()\n    return new Piece(\n      newType,\n      boardWidth,\n      size\n    )\n  }\n  \n  private fill(ctx: CanvasRenderingContext2D, fillstyle: string) {\n    for (let r = 0; r < this.shape.length; r++) {\n      for (let c = 0; c < this.shape.length; c++) {\n        let cell = this.shape[r][c]\n        if (cell > 0) {\n          ctx.fillStyle = fillstyle\n          drawSquare(this.col + c, this.row + r, ctx, this.size)\n        }\n      }\n    }\n  }\n}","export enum Keys {\n  SPACE = 32,\n  UP = 38,\n  DOWN = 40,\n  LEFT = 37,\n  RIGHT = 39,\n  A = 65,\n  D = 68,\n  Q = 81,\n  S = 83,\n  W = 87,\n}","import { TetrominoType, Shape, Shapes } from './shape'\nimport { addClass, drawSquare } from '../util'\nimport { Colors } from '../util/color'\nimport { Piece } from './piece';\nimport { Keys } from '../util/keys'\n\n// For now, equivalent to number[][] but may introduce stricter typing\n// i.e. [22][10], 22 rows of width 10\nexport interface BoardGrid extends Array<Array<number>> {}\n\nexport class Board {\n  grid: BoardGrid\n  width: number\n  height: number\n  container: HTMLCanvasElement\n  ctx: CanvasRenderingContext2D\n  tileSize: number // in px\n  activePiece: Piece\n  \n  constructor(\n    container: HTMLCanvasElement,\n    width: number,\n    height: number,\n    tileSize: number\n  ) {\n    this.width = width\n    this.height = height\n    this.container = container\n    this.ctx = this.container.getContext('2d') as CanvasRenderingContext2D\n\n    this.tileSize = tileSize\n    this.container.width = (this.width * this.tileSize)\n    this.container.height = (this.height * this.tileSize)\n    this.grid = this.initGrid()\n  }\n\n  public draw() {\n    for (let r = 0; r < this.height; r++) {\n      let row = this.grid[r]\n      \n      for (let c = 0; c < this.width; c++) {\n        let cell = row[c]\n\n        this.ctx.fillStyle = cell > 0 ? Colors[cell] : \"white\"\n        drawSquare(c, r, this.ctx, this.tileSize)\n      }\n    }\n    this.activePiece.draw(this.ctx)\n  }\n\n  public clearLines(): number {\n    let numLines = 0\n\n    for (let row = 0; row < this.height; row++) {\n      let line = this.grid[row].filter(el => el === 0).length === 0\n\n      if (line) {\n        numLines++\n\n        for (let r = row; r > 0; r--) {\n          for (let c = 0; c < this.width; c++) {\n            this.grid[r][c] = this.grid[r-1][c]\n          }\n        }\n        for (let c = 0; c < this.width; c++) {\n          this.grid[0][c] = 0\n        }\n      }\n    }\n    return numLines\n  }\n  \n  public getInput(e: KeyboardEvent) {\n    if (e.keyCode === Keys.UP || e.keyCode === Keys.W) {\n      this.activePiece.rotate(\n        this.ctx,\n        this.collides.bind(this)\n      )\n    }\n    if (e.keyCode === Keys.DOWN || e.keyCode === Keys.S) {\n      this.activePiece.down(\n        this.ctx,\n        this.collides.bind(this),\n        this.setOnBoard.bind(this)\n      )\n    }\n    if (e.keyCode === Keys.LEFT || e.keyCode === Keys.A) {\n      this.activePiece.left(\n        this.ctx,\n        this.collides.bind(this)\n      )\n    }\n    if (e.keyCode === Keys.RIGHT || e.keyCode === Keys.D) {\n      this.activePiece.right(\n        this.ctx,\n        this.collides.bind(this)\n      )\n    }\n    if (e.keyCode === Keys.SPACE) {\n      this.activePiece.hardDown(\n        this.ctx,\n        this.collides.bind(this)\n      )\n    }\n  }\n\n  public reset() {\n    this.grid = this.initGrid()\n    this.activePiece = Piece.randomPiece(this.width, this.tileSize)\n  }\n\n  private initGrid(): BoardGrid {\n    let rows = []\n    for (let r = 0; r < this.height; r++) {\n      let cells = []\n      for (let c = 0; c < this.width; c++) {\n        cells.push(0)\n      }\n      rows.push(cells)\n    }\n\n    return rows\n  }\n\n  public movePieceDown(): Piece | boolean {\n    return this.activePiece.down(\n      this.ctx,\n      this.collides.bind(this),\n      this.setOnBoard.bind(this)\n    )\n  }\n\n  private setOnBoard(row: number, col: number, type: TetrominoType) {\n    this.grid[row][col] = type\n  }\n  \n  private collides(piece: Piece, dx: number, dy: number, nextShape: Shape) {\n    for (let r = 0; r < nextShape.length; r++) {\n      for (let c = 0; c < nextShape.length; c++) {\n        let cell = nextShape[r][c]\n        if (cell === 0) continue\n\n        let x = piece.col + c + dx\n        let y = piece.row + r + dy\n        if (y >= this.height || x < 0 || x >= this.width) {\n          return true\n        }\n        if (y < 0) continue\n        if (this.grid[y][x]) {\n          return true\n        }\n      }\n    }\n    return false\n  }\n}","import { Board } from './model/board'\nimport { Piece } from './model/piece'\nimport { TetrominoType } from './model/shape';\nimport { Keys } from './util/keys';\n\nclass Tetris {\n  board: Board\n  width: number\n  height: number\n  tileSize: number\n  onDeck: Piece | null\n  container: HTMLCanvasElement\n  levelEl: HTMLElement\n  linesEl: HTMLElement\n  scoreEl: HTMLElement\n  level: number\n  lines: number\n  score: number\n  paused: boolean\n  gameOver: boolean\n  raf: number\n\n  limit: number\n  lastFrameTimeMs: number\n  maxFPS: number\n  delta: number\n  timestep: number\n  fps: number\n  framesThisSecond: number\n  lastFpsUpdate: number\n  gravity: number\n\n  constructor(container: HTMLCanvasElement) {\n    this.container = container\n    this.width = 10\n    this.height = 20\n    this.tileSize = 32\n    this.board = new Board(this.container, this.width, this.height, this.tileSize)\n    this.onDeck = null\n    this.levelEl = document.getElementById(\"level\") as HTMLElement\n    this.linesEl = document.getElementById(\"lines\") as HTMLElement\n    this.scoreEl = document.getElementById(\"score\") as HTMLElement\n    this.paused = false\n    this.gameOver = false\n    this.level = 0\n    this.lines = 0\n    this.score = 0\n    this.raf = -1\n\n    this.limit = 300\n    this.lastFrameTimeMs = 0\n    this.maxFPS = 60\n    this.delta = 0\n    this.timestep = 1000 / 60\n    this.fps = 60\n    this.framesThisSecond = 0\n    this.lastFpsUpdate = 0\n    this.gravity = 40\n  }\n\n  public start() {\n    this.getInput()\n    this.board.activePiece = Piece.randomPiece(this.width, this.tileSize)\n    this.raf = requestAnimationFrame(this.gameLoop.bind(this))\n  }\n\n  private getInput() {\n    function pause(this: any) {\n      this.paused = !this.paused\n      if (this.paused) {\n        this.pauseGame()\n      } else {\n        this.unpauseGame()\n      }\n    }\n\n    document.body.addEventListener(\"keydown\", (e) => {\n      this.board.getInput(e)\n      if (e.keyCode === Keys.Q) {\n        pause.call(this)\n      }\n    }, false)\n    const pauseButton = document.getElementById(\"btn-pause\") as HTMLElement\n    const restartButton = document.getElementById(\"btn-restart\") as HTMLElement\n    const playAgainButton = document.getElementById(\"btn-playagain\") as HTMLElement\n\n    pauseButton.addEventListener(\"click\", pause.bind(this))\n\n    restartButton.addEventListener(\"click\", this.reset.bind(this))\n    playAgainButton.addEventListener(\"click\", this.reset.bind(this))\n  }\n\n  private gameLoop(timestamp: any) {\n    if (this.gameOver) this.end()\n\n    if (timestamp < this.lastFrameTimeMs + ((1000 / this.maxFPS) * this.gravity)) {\n      this.raf = requestAnimationFrame(this.gameLoop.bind(this))\n      return\n    }\n    this.delta += timestamp - this.lastFrameTimeMs\n    this.lastFrameTimeMs = timestamp\n\n    if (timestamp > this.lastFpsUpdate + 1000) {\n      this.fps = 0.25 * this.framesThisSecond + 0.75 * this.fps\n\n      this.lastFpsUpdate = timestamp\n      this.framesThisSecond = 0\n    }\n\n    this.framesThisSecond++\n    let numUpdateSteps = 0\n    while (this.delta >= this.timestep) {\n      this.update()\n      this.delta -= this.timestep\n        if (++numUpdateSteps >= 240) {\n          break\n        }\n    }\n    this.draw()\n    this.raf = requestAnimationFrame(this.gameLoop.bind(this))\n  }\n\n  private draw() {\n    if (this.onDeck) {\n      this.board.activePiece = this.onDeck\n      this.onDeck = null\n    }\n    this.board.draw()\n    const newPiece = this.board.movePieceDown()\n\n    if (newPiece === true) {\n      this.gameOver = true\n      this.paused = true\n    }\n    if (newPiece instanceof Piece) {\n      this.onDeck = newPiece\n    }\n  }\n\n  private update() {\n    const linesCleared = this.board.clearLines()\n    this.lines += linesCleared\n    this.linesEl.textContent = `${this.lines}`\n\n    this.score += this.getScoreForLines(linesCleared)\n    this.scoreEl.textContent = `${this.score}`\n\n    if (this.shouldIncreaseLevel()) {\n      this.level++\n      this.gravity = this.gravity - 4\n    }\n    this.levelEl.textContent = `${this.level}`\n  }\n\n  private pauseGame() {\n    cancelAnimationFrame(this.raf)\n    const overlay = document.getElementById(\"pause-overlay\")\n    if (overlay) overlay.style.display = \"block\"\n  }\n\n  private unpauseGame() {\n    const overlay = document.getElementById(\"pause-overlay\")\n    if (overlay) overlay.style.display = \"none\"\n    this.raf = requestAnimationFrame(this.gameLoop.bind(this))\n  }\n\n  private end() {\n    const overlay = document.getElementById(\"overlay\")\n    if (overlay) overlay.style.display = \"block\"\n  }\n\n  private reset(e: MouseEvent) {\n    cancelAnimationFrame(this.raf)\n    const overlay = document.getElementById(\"overlay\")\n    if (overlay) overlay.style.display = \"none\"\n    this.gameOver = false\n\n    this.lines = 0\n    this.score = 0\n    this.level = 0\n    this.gravity = 40\n\n    this.board.reset()\n    this.raf = requestAnimationFrame(this.gameLoop.bind(this))\n  }\n\n  // NES scoring\n  private getScoreForLines(lines: number): number {\n    const multipliers = [0, 40, 100, 300, 1200]\n    return multipliers[lines] * (this.level + 1)\n  }\n\n  private shouldIncreaseLevel(): boolean {\n    if (this.level === 10) return false // max level\n    return (this.lines >= (this.level + 1) * 10)\n  }\n}\n\nconst container = document.getElementById(\"game\") as HTMLCanvasElement\nconst game = new Tetris(container)\ngame.start()"]}